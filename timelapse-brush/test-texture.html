<!DOCTYPE html>
<html>
<head>
    <title>Texture Test</title>
</head>
<body>
    <h1>Grunge-08 Texture Test</h1>
    <p>Original texture:</p>
    <canvas id="original" width="256" height="256" style="border: 1px solid black; background: white;"></canvas>
    
    <p>Processed texture (black to transparent):</p>
    <canvas id="processed" width="256" height="256" style="border: 1px solid black; background: repeating-linear-gradient(45deg, #ccc 0px, #ccc 10px, #999 10px, #999 20px);"></canvas>
    
    <div id="info"></div>
    
    <script>
        const img = new Image();
        img.onload = function() {
            // Draw original
            const origCanvas = document.getElementById('original');
            const origCtx = origCanvas.getContext('2d');
            origCtx.drawImage(img, 0, 0, 256, 256);
            
            // Process: convert black to transparent
            const processCanvas = document.getElementById('processed');
            const processCtx = processCanvas.getContext('2d');
            processCtx.drawImage(img, 0, 0, 256, 256);
            
            const imageData = processCtx.getImageData(0, 0, 256, 256);
            const data = imageData.data;
            
            let blackCount = 0;
            let convertedCount = 0;
            
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                
                if (r < 10 && g < 10 && b < 10) {
                    blackCount++;
                    data[i + 3] = 0; // Set alpha to 0
                    convertedCount++;
                }
            }
            
            processCtx.putImageData(imageData, 0, 0);
            
            document.getElementById('info').innerHTML = `
                <p><strong>Texture size:</strong> ${img.width}Ã—${img.height}</p>
                <p><strong>Black pixels found:</strong> ${blackCount}</p>
                <p><strong>Pixels converted to transparent:</strong> ${convertedCount}</p>
            `;
        };
        img.onerror = function() {
            document.getElementById('info').innerHTML = '<p style="color: red;">ERROR: Failed to load grunge-08.png</p>';
        };
        img.src = 'brushes/grunge-08.png';
    </script>
</body>
</html>
